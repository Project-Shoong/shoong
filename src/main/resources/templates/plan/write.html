<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/css/munseon.css">
	<link rel="stylesheet" href="/css/daterangepicker.css" />
	<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<script>
		$(function () {
			// header
			// $("#wrap").children("header").load("../layout/plan_header.html");

			$('#daterangepicker').daterangepicker({
			    "locale": {
			        "format": "YYYYë…„ MMì›” DDì¼",
			        "separator": "  ~  ",
			        "applyLabel": "ì ìš©",
			        "cancelLabel": "ì·¨ì†Œ",
			        "fromLabel": "From",
			        "toLabel": "To",
			        "customRangeLabel": "Custom",
			        "weekLabel": "W",
			        "daysOfWeek": [
			            "ì¼",
			            "ì›”",
			            "í™”",
			            "ìˆ˜",
			            "ëª©",
			            "ê¸ˆ",
			            "í† "
			        ],
			        "monthNames": [
			            "1ì›”",
			            "2ì›”",
			            "3ì›”",
			            "4ì›”",
			            "5ì›”",
			            "6ì›”",
			            "7ì›”",
			            "8ì›”",
			            "9ì›”",
			            "10ì›”",
			            "11ì›”",
			            "12ì›”"
			        ],
			        "firstDay": 1
			    },
			    "alwaysShowCalendars": true,
			    "parentEl": ".box_date",
			    "applyButtonClasses": "btn_apply_drp",
			    "cancelClass": "btn_default_drp"
			}, function(start, end, label) {
			  console.log('New date range selected: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD') + ' (predefined range: ' + label + ')');
			});
		});
	</script>
	<title>ê³„íš ì„¸ìš°ê¸°</title>
</head>

<body>
	<div id="wrap">
		<header>
			<!-- <th:block th:replace="~{../layout/plan_header::plan_header}"></th:block> -->
			<div id="header">
				<!-- í—¤ë”, ì „ì²´ ë©”ë‰´ -->
				<div class="logo">
					<a href="/">
						<img src="/images/left_logo.png" alt="">
					</a>
				</div>
				<nav class="menu">
					<ul>
						<li>
							<a href="#">
								<div>
									<img src="/images/left_icon1.png" alt="">
									<p>ê³„íš ì„¸ìš°ê¸°</p>
								</div>
							</a>
						</li>
						<li>
							<a href="#">
								<div>
									<img src="/images/left_icon2.png" alt="">
									<p>ê³„íš êµ¬ê²½í•˜ê¸°</p>
								</div>
							</a>
						</li>
						<li>
							<a href="#">
								<div>
									<img src="/images/left_icon3.png" alt="">
									<p>í›„ê¸° êµ¬ê²½í•˜ê¸°</p>
								</div>
							</a>
						</li>
						<li>
							<a href="#">
								<div>
									<img src="/images/left_icon4.png" alt="">
									<p>ë§ˆì´ í˜ì´ì§€</p>
								</div>
							</a>
						</li>
					</ul>
				</nav>
			</div>
		</header>
		<main>
			<div id="contents">
				<div class="map">
					<!-- ì§€ë„ -->
					<span class="cover"></span>

				</div>
				<div class="detail">
					<div class="box member_invite">
						<label for="search_user">
							<h3>ì‚¬ìš©ì ì´ˆëŒ€</h3>
						</label>
						<div class="search_input">
							<input type="text" id="search_user" name="search_user" placeholder="ì‚¬ìš©ì IDë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”"
								onkeyup="searchUser()">
						</div>
						<span>ì‚¬ìš©ì</span>
						<div class="user_list" id="userList">
							<th:block th:each="user : ${userList}">
								<div class="user">
									<div class="user_img">
										<img src="" alt="">
									</div>
									<div class="user_info">
										<span th:text="${user.nickname}">ë‹‰ë„¤ì„</span>
										<span th:text="${user.userId}">ì•„ì´ë””</span>
									</div>
									<div class="btn btn_invite">
										<span>ì´ˆ&nbsp&nbspëŒ€</span>
									</div>
								</div>
							</th:block>
						</div>
					</div>
					<div class="box destination_choose">
						<label for="search_destination">
							<h3>ëª©ì ì§€ ì„ íƒ</h3>
						</label>
						<div class="search_input">
							<input type="text" id="search_destination" name="search_destination"
								placeholder="ë„ì‹œ ë˜ëŠ” ë‚˜ë¼ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”" onkeyup="searchDefaultDestination()">
						</div>
						<div class="continents">
							<button class="btn btn_continent">ì „ì²´</button>
							<button class="btn btn_continent btn_unclicked">ë™ë‚¨ì•„</button>
							<button class="btn btn_continent btn_unclicked">ì•„ì‹œì•„</button>
							<button class="btn btn_continent btn_unclicked">ëŒ€ì–‘ì£¼</button>
							<button class="btn btn_continent btn_unclicked">ìœ ëŸ½</button>
							<button class="btn btn_continent btn_unclicked">ë¯¸ì£¼</button>
						</div>
						<span>ëª©ì ì§€</span>
						<div class="destination_list" id="defaultDestinationList">
							<th:block th:each="destination:${defaultDestinationList}">
								<div class="destination">
									<div class="destination_img">
										<img src="/images/default_destination.jpg" alt="">
									</div>
									<span th:text="${destination.cityKor}"></span>
								</div>
							</th:block>
							<!--
							<div class="destination">
								<div class="destination_img">
									<img src="" alt="">
								</div>
								<span>ë„ì¿„</span>
							</div>-->
						</div>
					</div>
					<div class="box date_choose">
						<h3>ë‚ ì§œ ì„ íƒ</h3>
						<div class="box_date">
							
						</div>
					</div>
					<div class="box place_choose">
						<label for="search_place">
							<h3>ì¥ì†Œ ì¶”ê°€</h3>
						</label>
						<div class="search_input">
							<input type="text" id="search_place" name="search_place" placeholder="ì¥ì†Œ ì´ë¦„ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”">
						</div>
						<span>ê²€ìƒ‰ ê²°ê³¼</span>
						<div class="place_list">
							<div class="place">
								<div class="place_img">
									<img src="" alt="">
								</div>
								<div class="place_info">
									<div class="place_name">
										<span>ì¥ì†Œëª…</span>
										<div class="place_type">êµ¬ë¶„</div>
									</div>
									<div class="place_ratings">
										<div class="img_rating">
											<img src="/images/rating.png" alt="">
										</div>
										<span class="place_rating">5.0</span>
										<span class="place_ratings_total">(3)</span>
									</div>
									<span class="place_address">ì£¼ì†Œ</span>
								</div>
								<div class="btn btn_add_place">
									<span>ì¶”&nbsp&nbspê°€</span>
								</div>
							</div>
							<span class="place_separator"></span>
						</div>
					</div>
					<div class="box schedule_manage">
						<h3>ì¼ì • ê´€ë¦¬</h3>
						<div>
							<div class="schedule_place">
								<label for="schedule_search_place">
									<h4>ì¥ì†Œ ì¶”ê°€</h4>
								</label>
								<div class="search_input">
									<input type="text" id="schedule_search_place" name="schedule_search_place"
										placeholder="ì¶”ê°€ëœ ì¥ì†Œë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”">
								</div>
								<span>ê²€ìƒ‰ ê²°ê³¼</span>
								<div class="place_list">
									<div class="place">
										<div class="place_img">
											<img src="" alt="">
										</div>
										<div class="place_info">
											<div class="place_name">
												<span>ì¥ì†Œëª…</span>
												<div class="place_type">êµ¬ë¶„</div>
											</div>
											<div class="place_ratings">
												<div class="img_rating">
													<img src="/images/rating.png" alt="">
												</div>
												<span class="place_rating">5.0</span>
												<span class="place_ratings_total">(3)</span>
											</div>
											<span class="place_address">ì£¼ì†Œ</span>
										</div>
										<div class="btn btn_add_place">
											<span>ì„ &nbsp&nbspíƒ</span>
										</div>
									</div>
									<span class="place_separator"></span>
								</div>
							</div>
							<div class="time_choose">
								<h4>ì¥ì†Œ ì¶”ê°€</h4>
								<div>
									<div>
										<span>ì‹œì‘ ì‹œê°„</span>
										<input type="text">
									</div>
									<div>
										<span>ì¢…ë£Œ ì‹œê°„</span>
										<input type="text">
									</div>
								</div>
							</div>
							<div class="cost_manage">
								<h4>ë¹„ìš© ê´€ë¦¬</h4>
								<div class="cost_list">
									<div class="cost">
										<span class="cost_separator"></span>
										<span class="cost_name">í•­ëª©ëª…</span>
										<span class="cost_payer">ì´ë¦„</span>
										<span class="cost_amount">10ì›</span>
										<div class="cost_remove">
											<img src="/images/remove.png" alt="">
										</div>
									</div>
								</div>
								<div class="cost_add">
									<div>
										<img src="/images/add.png" alt="">
									</div>
									<span>ë¹„ìš© ì¶”ê°€</span>
								</div>
								<div class="cost_amounts_total">
									<span>í•©ê³„ : </span>
									<span>0ì›</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="holder">
					<!-- ê³„íš ë©”ë‰´ -->
					<div class="plan">
						<!-- ë‚´ìš© ì˜ì—­ -->
						<section>
							<!-- 5. ì¼ì • ì§œê¸° -->
							<div class="box">
								<div class="index">
									<h2>ì¼ì • ì§œê¸°</h2>
									<span>5</span>
								</div>
								<div class="description">
									<h3>ì—¬í–‰ ì¼ì •ì„ ì„¸ì›Œë³´ì„¸ìš”</h3>
									<p>ì¼ì •ë³„ë¡œ ë°©ë¬¸ ì¥ì†Œì™€ ì‹œê°„ì„ ì„¤ì •í•´ë³´ì„¸ìš”</p>
									<p>ì¥ì†Œë³„ë¡œ ì§€ì¶œ ê³„íšë„ ì„¸ìš¸ ìˆ˜ ìˆì–´ìš”</p>
								</div>
								<div class="content">
									<span>
										<!-- ì—¬í–‰ ë‚ ì§œ í‘œì‹œ -->
										2024ë…„ 9ì›” 1ì¼ ~ 2024ë…„ 9ì›” 3ì¼
									</span>
									<div class="schedules">
										<!-- ë‚ ì§œ ë¦¬ìŠ¤íŠ¸ -->
										<div class="schedule">
											<div>
												<div class="schedule_info">
													<div class="schedule_day">
														<span>DAY</span>
													</div>
													<div class="schedule_date">
														<span>09.01</span>
													</div>
													<div class="schedule_cost">
														<span>100,001,000ì›</span>
													</div>
													<div class="schedule_toggle">
														<img src="/images/toggle_up.png" alt="">
													</div>
												</div>
												<span class="schedule_separator"></span>
											</div>
											<div class="itineraries">
												<div>
													<div class="itinerary">
														<span class="itinerary_type"></span>
														<div class="itinerary_info">
															<span class="itinerary_place">ì¥ì†Œëª…</span>
															<span class="itinerary_destination">ë„ì‹œëª…</span>
														</div>
														<div class="itinerary_times">
															<span class="itinerary_start_time">12ì‹œ 30ë¶„</span>
															<span>~</span>
															<span class="itinerary_end_time">12ì‹œ 40ë¶„</span>
														</div>
														<div class="itinerary_remove">
															<img src="/images/remove.png" alt="">
														</div>
													</div>
												</div>
												<div>
													<div class="itinerary">
														<span class="itinerary_type"></span>
														<div class="itinerary_info">
															<span class="itinerary_place">ì¥ì†Œëª…</span>
															<span class="itinerary_destination">ë„ì‹œëª…</span>
														</div>
														<div class="itinerary_times">
															<span class="itinerary_start_time">12ì‹œ 30ë¶„</span>
															<span>~</span>
															<span class="itinerary_end_time">12ì‹œ 40ë¶„</span>
														</div>
														<div class="itinerary_remove">
															<img src="/images/remove.png" alt="">
														</div>
													</div>
												</div>
											</div>
											<div class="itinerary_add">
												<div>
													<img src="/images/add.png" alt="">
												</div>
												<span>ì¼ì • ì¶”ê°€</span>
											</div>
										</div>
										<div class="schedule">
											<div>
												<div class="schedule_info">
													<div class="schedule_day">
														<span>DAY</span>
													</div>
													<div class="schedule_date">
														<span>09.01</span>
													</div>
													<div class="schedule_cost">
														<span>100,001,000ì›</span>
													</div>
													<div class="schedule_toggle">
														<img src="/images/toggle_down.png" alt="">
													</div>
												</div>
												<span class="schedule_separator"></span>
											</div>
										</div>
									</div>
								</div>
								<div class="plan_cost">
									<span>ì „ì²´ ë¹„ìš© : </span>
									<span>0ì›</span>
								</div>
								<div>
									<!-- ì¼ì • í¸ì§‘ ëª¨ë‹¬ -->
								</div>
							</div>
						</section>
						<div class="plan_holder">
							<!-- 1-4. ê³„íš ì„¸ìš°ê¸° -->
							<section>
								<!-- 1. ê·¸ë£¹ ì´ˆëŒ€ -->
								<div class="box">
									<div class="index" onclick="getGroupList()">
										<h2>ê·¸ë£¹ ì´ˆëŒ€</h2>
										<span>1</span>
									</div>
									<div class="description">
										<h3>ì‚¬ìš©ìë¥¼ ì´ˆëŒ€í•˜ì—¬<br>í•¨ê»˜ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”</h3>
										<p>ì‚¬ìš©ìì˜ IDë¥¼ ê²€ìƒ‰í•˜ì—¬ ê·¸ë£¹ì— ì´ˆëŒ€í•˜ê³ </p>
										<p>í•¨ê»˜ êµ¬ì²´ì ì¸ ì—¬í–‰ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”</p>
									</div>
									<div class="content">
										<span>ê·¸ë£¹ì› ğŸ§³</span>
										<div class="members" id="groupMemberList">
											<th:block th:each="member:${groupMemberList}">
												<span class="member_separator" th:if="${memberStat.index > 0}"></span>
												<div class="member">
													<div class="member_img">
														<img src="" alt="">
													</div>
													<div class="member_name">
														<span th:text="${member.nickname}">ë‹‰ë„¤ì„</span>
														<span th:text="${member.userId}"></spanth>
													</div>
													<div class="member_rule">
														<span th:text="${member.rule}"></span>
													</div>
												</div>
											</th:block>
											<!-- ê·¸ë£¹ì› ë¦¬ìŠ¤íŠ¸ -->
											<!-- <span class="member_separator"></span>
                                            <div class="member">
                                                <div class="member_img">
                                                    <img src="" alt="">
                                                </div>
                                                <div class="member_name">
                                                    <span>ë‹‰ë„¤ì„</span>
                                                    <span>ì•„ì´ë””</span>
                                                </div>
                                            </div> -->
										</div>
									</div>
									<div>
										<!-- ì‚¬ìš©ì ì´ˆëŒ€ ëª¨ë‹¬ -->
									</div>
								</div>
							</section>
							<section>
								<!-- 2. ë„ì‹œ ë° ë‚˜ë¼ ì„ íƒ -->
								<div class="box">
									<div class="index">
										<h2>ë„ì‹œ ë° ë‚˜ë¼ ì„ íƒ</h2>
										<span>2</span>
									</div>
									<div class="description">
										<h3>ê°€ê³  ì‹¶ì€ ë„ì‹œ ë° ë‚˜ë¼ë¥¼<br>ê³¨ë¼ë³´ì„¸ìš”</h3>
										<p>ì—¬í–‰ ê³„íšì˜ ì¶œë°œì ì€ ì—¬í–‰ ëª©ì ì§€ ì„ íƒì…ë‹ˆë‹¤</p>
										<p>ê²½ë¡œ ì„¤ì •ì„ ìœ„í•´ ëª©ì ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
									</div>
									<div class="content">
										<span>ëª©ì ì§€ ğŸš©</span>
										<div class="selected_destination_list">
											<!-- ëª©ì ì§€ ë¦¬ìŠ¤íŠ¸ -->
										<!--<div class="selected_destination">
												<div class="selected_destination_img">
													<img src="" alt="">
												</div>
												<div class="selected_destination_name">
													<span>ëª©ì ì§€</span>
												</div>
											</div>-->
										</div>
									</div>
									<div>
										<!-- ëª©ì ì§€ ì„ íƒ ëª¨ë‹¬ -->
									</div>
								</div>
							</section>
							<section>
								<!-- 3. ë‚ ì§œ ì„ íƒ -->
								<div class="box">
									<div class="index">
										<h2>ë‚ ì§œ ì„ íƒ</h2>
										<span>3</span>
									</div>
									<div class="description">
										<h3>ì—¬í–‰ ê¸°ê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
										<p>ì—¬í–‰ì˜ ì‹œì‘ ì¼ì •ê³¼ ì¢…ë£Œ ì¼ì •ì„ ì„¤ì •í•´ì£¼ì„¸ìš”</p>
									</div>
									<div class="content">
										<span>ê¸°ê°„ ğŸ—“ï¸ (â¬‡ï¸ í´ë¦­)</span>
										<div class="date">
											<input type="type" name="daterangepicker" id="daterangepicker" placeholder="ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”"/>
										</div>
									</div>
									<div>
										<!-- ë‚ ì§œ ì„ íƒ ëª¨ë‹¬ -->
									</div>
								</div>
							</section>
							<section>
								<!-- 4. ì¥ì†Œ ì„ íƒ -->
								<div class="box">
									<div class="index">
										<h2>ì¥ì†Œ ì„ íƒ</h2>
										<span>4</span>
									</div>
									<div class="description">
										<h3>ê°€ê³  ì‹¶ì€ ì¥ì†Œë“¤ì„ ëª¨ì•„ë³´ì„¸ìš”</h3>
										<p>ì—¬í–‰ ê¸°ê°„ ë™ì•ˆ ë°©ë¬¸í•  ì¥ì†Œë“¤ì„ ëª¨ì•„ì£¼ì„¸ìš”</p>
										<p>ë‹¤ìŒ ë‹¨ê³„ì—ì„œ êµ¬ì²´ì ì¸ ê³„íšì„ ì„¸ìš¸ ìˆ˜ ìˆì–´ìš”</p>
									</div>
									<div class="content">
										<span>ì¥ì†Œ ğŸï¸</span>
										<div class="places">
											<!-- ì¥ì†Œ ë¦¬ìŠ¤íŠ¸ -->
											<div class="place">
												<div class="place_img">
													<img src="" alt="">
												</div>
												<div class="place_info">
													<div class="place_name">
														<span>ì¥ì†Œëª…</span>
														<div><span>ìˆ™ì†Œ</span></div>
													</div>
													<span>ì£¼ì†Œ</span>
												</div>
												<div class="place_remove">
													<img src="/images/remove.png" alt="">
												</div>
											</div><span class="place_separator"></span>
											<div class="place">
												<div class="place_img">
													<img src="" alt="">
												</div>
												<div class="place_info">
													<div class="place_name">
														<span>ì¥ì†Œëª…</span>
														<div><span>ìˆ™ì†Œ</span></div>
													</div>
													<span>ì£¼ì†Œ</span>
												</div>
												<div class="place_remove">
													<img src="/images/remove.png" alt="">
												</div>
											</div>
										</div>
									</div>
									<div>
										<!-- ì¥ì†Œ ì¶”ê°€ ëª¨ë‹¬ -->
									</div>
								</div>
							</section>
							<section>
								<div class="box">
									<div class="index">
										<h2>ê³„íš ì„¸ìš°ê¸°</h2>
										<span>1 - 4</span>
									</div>
								</div>
							</section>
						</div>
					</div>
					<div class="next">
						<!-- ë²„íŠ¼ ì˜ì—­ -->
						<button class="btn btn_schedule">
							<p>ì¼ì • ì§œê¸°</p>
						</button>
						<button class="btn btn_save">
							<p>ì €&nbsp;&nbsp;ì¥</p>
						</button>
					</div>
				</div>
			</div>
			<div id="fab">
				<div class="btn fab_btn">
					<img src="/images/left_logo.png" alt="">
				</div>
			</div>
		</main>
	</div>
</body>
<script src="/js/plan_event.js"></script>
<script th:inline="javascript">
	const destinations = $('.selected_destination_list');
	
	// ë„ì‹œ ë° ë‚˜ë¼ ì„ íƒ - ì„ íƒ ê¸°ë³¸ëª©ì ì§€ ê´€ë¦¬
	let selectedDefaultDestination = new Map();
	
	// ì„ íƒ ê¸°ë³¸ëª©ì ì§€ ì „ì²´ ì¡°íšŒ
	function getSelectedDefaultDestination() {
		destinations.html("");
		for(const [name, image] of selectedDefaultDestination) {
			var str = "";
			str += "<div class='selected_destination'>";
			str += "<div class='selected_destination_img'>";
			str += "<img src='"+image+"'>";
			str += "<\/div>";
			str += "<div class=\"selected_destination_name\">";
			str += "<span>"+name+"</span>";
			str += "<\/div>";
			str += "<\/div>";
			destinations.append(str);
		}
	}
	
	// ê¸°ë³¸ëª©ì ì§€ ì¶”ê°€ í›„ ì¡°íšŒ
	function addDefaultDestination(name, image) {
		if(!selectedDefaultDestination.get(name)) {
			selectedDefaultDestination.set(name, image);
			var str = "";
			str += "<div class='selected_destination'>";
			str += "<div class='selected_destination_img'>";
			str += "<img src='"+image+"'>";
			str += "<\/div>";
			str += "<div class=\"dselected_estination_name\">";
			str += "<span>"+name+"</span>";
			str += "<\/div>";
			str += "<\/div>";
			destinations.append(str);
		}
	}
	
	// ê¸°ë³¸ëª©ì ì§€ ì‚­ì œ í›„ ì¡°íšŒ
	function removeDefaultDestination(name) {
		selectedDefaultDestination.delete(name);
		getSelectedDefaultDestination();
	}
	
	
	
	// ê·¸ë£¹ ì´ˆëŒ€ - ì‚¬ìš©ì ê²€ìƒ‰
	function searchUser() {
		const keyword = $('#search_user').val();
		if (keyword.length > 0) {
			$.ajax({
				url: "/user/search",
				type: "GET",
				data: {"keyword": keyword},
				success: function (userList) {
					$('#userList').replaceWith(userList);
				}
			})
		}
		else {
			$('#userList').html('');
		}
	}

	// ê·¸ë£¹ ì´ˆëŒ€ - ê·¸ë£¹ì› ëª©ë¡
	window.onload = getGroupList();
	// member_index.trigger("click");
	function getGroupList() {
		const planId = /*[[${planId}]]*/'';
		$.ajax({
			url: "/group/list",
			type: "GET",
			data: {"planId": planId},
			success: function (groupMemberList) {
				$('#groupMemberList').replaceWith(groupMemberList);
			}
		})
	}
	
	// ë„ì‹œ ë° ë‚˜ë¼ ì„ íƒ - ëª©ì ì§€ ê²€ìƒ‰
	window.onload = searchDefaultDestination();
	function searchDefaultDestination() {
		const keyword = $('#search_destination').val();
		$.ajax({
			url: "/defaultdestination/list",
			type: "GET",
			data: {"keyword": keyword, "continent": continent},
			success: function (defaultDestinationList) {
				$('#defaultDestinationList').replaceWith(defaultDestinationList)
			}
		})
	}
</script>
</html>