<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
	<script src="../js/jieun.js"></script>

    <title>계획 구경하기</title>
</head>
<body>
	<!--<th:block th:if="${session.loginUser == null">
		<script>
			location.replace('/user/login');
		</script>
	</th:block>-->
<div id="wrap">
    <!-- 헤더 불러오기 -->
    <div id="header">
        <th:block th:replace="~{layout/header::header}"></th:block>
    </div>

    <!-- 서브 상단 -->
    <div id="sub_top">
        <p>
            <a href="#">홈</a>
            > 
            <a href="#">계획 구경하기</a>
        </p>
        <div>계획 구경하기</div>
    </div>

    <div class="container">
        <div class="inner">
            <!-- ★★★작업위치-시작★★★ -->
            <div id="plan_view">
                <div class="search">
                    <p>검색 키워드</p>
                    <form name="searchForm" id="searchForm" action="/board/list">
                        <select name="keywordType" id="keywordType">
                            <option value="all">전체</option>
                            <option value="country">나라</option>
                            <option value="city">도시</option>
                        </select>
                        <input type="search" id="keyword" name="keyword">
                        <a href="#" id="search-btn" class="btn">
                            <img src="../images/search.png" alt="">
                        </a>
                    </form>
                </div>
    
                <p class="blue_line"></p>
    
                <div class="category">
                    <ul>
                        <li><a href="#" class="active">전체</a></li>
                        <li><a href="#">동남아</a></li>
                        <li><a href="#">아시아</a></li>
                        <li><a href="#">대양주</a></li>
                        <li><a href="#">유럽</a></li>
                        <li><a href="#">미주</a></li>
                    </ul>
                </div>
    
                <div class="plan_list">
					<div th:if="${planWithDestinations == null or planWithDestinations.size() == 0}" class="no_list">
						<p>등록된 게시글이 없습니다.</p>
					</div>
					<ul class="plan_list">
                        <li th:if="${planData.plan.isShared == 1}" th:each="planData : ${planWithDestinations}">
                            <div class="list_title">
                                <div>
                                    <div class="f_left">
                                        [[${planData.destinations[0].countryKor}]]
                                        <div>[[${planData.destinations[0].cityKor}]]
                                            <p th:if="${planData.destinations.size() > 1}" class="plus">외 <span>[[${planData.destinations.size() - 1}]]</span></p>
                                        </div>
                                    </div>
                                    <div class="f_right">
                                        <span>[[${planData.planDays}]]</span>박 <span>[[${planData.planDays + 1}]]</span>일
                                    </div>
                                </div>
                                <div>
                                    <div class="date">
                                        [[${planData.plan.startDate.substring(0, 10)}]] ~ [[${planData.plan.endDate.substring(0, 10)}]]
                                    </div>
                                    <div class="wirter">
                                        <span>[[${#strings.substring(planData.groupLeader, 0, 3)} + ${#strings.repeat('*', planData.groupLeader.length() - 3)}]]</span>님
                                    </div>
                                </div>
                            </div>
                            <p class="blue_line"></p>
                            <div class="list_content">
                                <ul>
                                    <li>
                                        <div>인원 수</div>
                                        <div><span class="group_num">[[${planData.groupCount}]]</span>명</div>
                                    </li>
                                    <li>
                                        <div>방문 장소</div>
                                        <div><span class="place_num">[[${planData.places.size()}]]</span>개</div>
                                    </li>
                                </ul>
                                <div>
                                    <div id="like_plan">
                                        <div class="img">
                                            <span class="heart" onclick="likedPlan(this)">
												<img th:src="${planData.getLikedPlanByUserId == 1 ? '../images/like_on.png' : '../images/like.png'}" alt="">
											</span>
											<input th:value="${planData.plan.planId}" class="planID hidden"/>
                                            <span class="like_plan_num">[[${planData.likedPlanCount}]]</span>
                                        </div>
                                    </div>
                                    <a href="#">계획 보러가기</a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- 페이징 버튼 -->
                <div class="pagination">
                    <a th:if="${pageMaker.prev}" class="btn changePage" href="1"><img src="../images/page_end.png" class="reflect" alt=""></a>
                    <a th:if="${pageMaker.prev}" class="btn changePage" th:href="${pageMaker.startPage - 1}"><img src="../images/page_next.png" class="reflect" alt=""></a>
                    <!--<a href="#" class="now_page">1</a>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <a href="#">4</a>
                    <a href="#">5</a>
                    <a href="#">6</a>
                    <a href="#">7</a>
                    <a href="#">8</a>
                    <a href="#">9</a>
                    <a href="#">10</a>-->
					<!-- #numbers.sequence(1,7) 숫자를 넘기면 반복자를 만들어주는 함수 [1,2,3,4,5,6,7] -->
					<th:block th:each="i:${#numbers.sequence(pageMaker.startPage, pageMaker.endPage)}">
						<a class="btn changePage" th:href="${i}">[[${i}]]</a>
					</th:block>
                    <a th:if="${pageMaker.next}" class="btn changePage" th:href="${pageMaker.endPage + 1}"><img src="../images/page_next.png" alt=""></a>
                    <a th:if="${pageMaker.next}" class="btn changePage" th:href="${pageMaker.realEnd}"><img src="../images/page_end.png" alt=""></a>
                </div>
            </div>

            <!-- ★★★작업위치-끝★★★ -->
        </div>
    </div>

    <!-- 푸터 불러오기 -->
    <div id="footer">
        <th:block th:replace="~{layout/footer::footer}"></th:block>
    </div>
</div>
</body>