<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.PlaceMapper">
	<select id="getMyPlaceByDestIds"  resultType="Long">
		SELECT COUNT(*) FROM `place` p
    	JOIN `destination` d ON p.destination_id = d.destination_id
    	WHERE d.destination_id IN
    <foreach item="destinationId" collection="destIds" open="(" separator="," close=")">
        #{destinationId}
    </foreach>
    AND d.plan_id IN
    <foreach item="planId" collection="planIds" open="(" separator="," close=")">
        #{planId}
    </foreach>
    GROUP BY d.plan_id
	</select>
</mapper>